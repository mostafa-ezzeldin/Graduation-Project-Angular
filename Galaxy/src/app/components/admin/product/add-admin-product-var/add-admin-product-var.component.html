<h1 class="text-center mt-5">Add Variant Product</h1>


<form (submit)="AddImagesAndProduct()" [formGroup]="myForm" class="col-6 mx-auto">

    <!-- name -->
    <label>product name</label>
    <input formControlName="name" class="form-control my-2" placeholder="product name" type="text">
    <!-- Display error message if "required" validation fails -->
    <div [class.d-none]="!NameError()?.['required']" class="text-danger">
        product Name is required
    </div>

    <!-- Display error message if "minlength" or "maxlength" validation fails -->
    <div [class.d-none]="!(NameError()?.['minlength'] || NameError()?.['maxlength']) || !NameError()"
        class="text-danger">
        product Name must be more than 2 chars and less than 150
    </div>

    <!-- Display success message when the form is valid -->
    <div [class.d-none]="NameError()" class="text-success">
        product Name is valid
    </div>





    <!-- description -->
    <label>product description</label>
    <input formControlName="description" class="form-control my-2" placeholder="product description" type="text">
    <!-- Display error message if "required" validation fails -->
    <div [class.d-none]="!descriptionError()?.['required']" class="text-danger">
        description is required
    </div>

    <!-- Display error message if "minlength" or "maxlength" validation fails -->
    <div [class.d-none]="!(descriptionError()?.['minlength'] || descriptionError()?.['maxlength']) || !descriptionError()"
        class="text-danger">
        description must be more than 3 chars and less than 500
    </div>

    <!-- Display success message when the form is valid -->
    <div [class.d-none]="descriptionError()" class="text-success">
        description is valid
    </div>

    <div class="d-flex">


        <div class="d-flex flex-column w-50">

            <!-- image -->
            <label>image</label>
            <input formControlName="image" (change)="onFileSelected($event)" class="form-control my-2"
                placeholder="sub category image" type="file">

            <!-- Display error message if "required" validation fails -->
            <div [class.d-none]="!ImageError()?.['required']" class="text-danger">
                image is required
            </div>

            <!-- Display success message when the form is valid -->
            <div [class.d-none]="ImageError()" class="text-success">
                image is valid
            </div>
        </div>



        <div class="d-flex flex-column w-50">
            <!-- image -->
            <label>product images</label>
            <input multiple formControlName="productImages" (change)="onFilesListSelected($event)"
                class="form-control my-2" placeholder="product images" type="file">

            <!-- Display error message if "required" validation fails -->
            <div [class.d-none]="!productImagesError()?.['required']" class="text-danger">
                product images is required
            </div>

            <!-- Display success message when the form is valid -->
            <div [class.d-none]="productImagesError()" class="text-success">
                product images is valid
            </div>
        </div>


    </div>




    <div class="d-flex">

        <div class=" flex-column col-4">


            <!-- quantity -->
            <label>quantity</label>
            <input formControlName="quantity" class="form-control my-2" placeholder="product quantity" type="number">
            <!-- Display error message if "required" validation fails -->
            <div [class.d-none]="!quantityError()?.['required']" class="text-danger">
                quantity is required
            </div>

            <!-- Display error message if "minlength" or "maxlength" validation fails -->
            <div [class.d-none]="!(quantityError()?.['min'] || quantityError()?.['pattern']) || !quantityError()"
                class="text-danger">
                quantity must be integer and more than 0
            </div>

            <!-- Display success message when the form is valid -->
            <div [class.d-none]="quantityError()" class="text-success">
                quantity is valid
            </div>

        </div>


        <div class=" flex-column">

            <!-- price -->
            <label>price</label>
            <input formControlName="price" class="form-control my-2" placeholder="product price" type="number">
            <!-- Display error message if "required" validation fails -->
            <div [class.d-none]="!priceError()?.['required']" class="text-danger">
                price is required
            </div>

            <!-- Display error message if "minlength" or "maxlength" validation fails -->
            <div [class.d-none]="!(priceError()?.['min'] || priceError()?.['pattern']) || !priceError()"
                class="text-danger">
                price must be more than 0
            </div>

            <!-- Display success message when the form is valid -->
            <div [class.d-none]="priceError()" class="text-success">
                price is valid
            </div>

        </div>

        <div class=" flex-column">


            <!-- discount -->
            <label>discount</label>
            <input formControlName="discount" class="form-control my-2" placeholder="product discount" type="number">
            <!-- Display error message if "required" validation fails -->
            <div [class.d-none]="!discountError()?.['required']" class="text-danger">
                discount is required
            </div>

            <!-- Display error message if "minlength" or "maxlength" validation fails -->
            <div [class.d-none]="!(discountError()?.['min'] || discountError()?.['max']) || !discountError()"
                class="text-danger">
                discount must be more than 0
            </div>

            <!-- Display success message when the form is valid -->
            <div [class.d-none]="discountError()" class="text-success">
                discount is valid
            </div>

        </div>

    </div>






    <div class="d-flex justify-content-evenly">

        <div class=" flex-column col-3">

            <!-- brandId -->
            <label class="d-block">brand</label>
            <select formControlName="brandId">
                <option [value]="0">select brand</option>
                <option [value]="brand.id" *ngFor="let brand of brands">{{brand.name}}</option>
            </select>

            <!-- Display error message if "required" validation fails -->
            <div [class.d-none]="!brandError()" class="text-danger">
                brand is required
            </div>

            <!-- Display success message when the form is valid -->
            <div [class.d-none]="brandError()" class="text-success">
                brand is valid
            </div>

        </div>




        <div class=" flex-column col-3">


            <!-- subCategoryId -->
            <label class="d-block">Sub Category</label>
            <select formControlName="subCategoryId">
                <option [value]="0">select category</option>
                <option [value]="subcategory.id" *ngFor="let subcategory of subcategories">{{subcategory.name}}</option>
            </select>

            <!-- Display error message if "required" validation fails -->
            <div [class.d-none]="!subCategoryError()" class="text-danger">
                category is required
            </div>

            <!-- Display success message when the form is valid -->
            <div [class.d-none]="subCategoryError()" class="text-success">
                category is valid
            </div>


        </div>


        <div class=" flex-column col-3">


            <!-- varGroupId -->
            <label class="d-block">var Group</label>
            <select (change)="onGroupChange($event)" formControlName="varGroupId">
                <option [value]="0">select Group</option>
                <option [value]="group.id" *ngFor="let group of groups">{{group.name}}</option>
            </select>

            <!-- Display error message if "required" validation fails -->
            <div [class.d-none]="!GroupError()" class="text-danger">
                Group is required
            </div>

            <!-- Display success message when the form is valid -->
            <div [class.d-none]="GroupError()" class="text-success">
                Group is valid
            </div>


        </div>

    </div>







    <div *ngFor="let attributewithvalue of attributeWithValues">
        <!-- values -->
        <label>{{attributewithvalue.attribute.name}}</label>
        <select (change)="onValuesChange($event,attributewithvalue.values)">
            <option [value]="0">select values</option>
            <option [value]="value.id" *ngFor="let value of attributewithvalue.values">{{value.name}}</option>
        </select>

        <!-- Display error message if "required" validation fails -->
        <div [class.d-none]="!valuesError()" class="text-danger">
           all values is required
        </div>

        <!-- Display success message when the form is valid -->
        <div [class.d-none]="valuesError()" class="text-success">
            values are valid
        </div>
    </div>





    <button [disabled]="!myForm.valid || valuesError()" type="submit" class="btn btn-success w-100 mx-auto mt-3">Add</button>
</form>